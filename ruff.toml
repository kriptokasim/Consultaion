line-length = 100
target-version = "py311"

[lint]
select = [
  "E",  # pycodestyle errors
  "F",  # pyflakes
  "I",  # isort
  "B",  # bugbear
  "Q",  # flake8-quotes
]

ignore = [
  "E501",  # line length handled separately
  "B008",  # FastAPI uses Depends() in function defaults - this is intentional
  "B007",  # Loop variables not used - sometimes intentional for unpacking
  "F841",  # Unused local variables - many are intentional for state tracking
]

[lint.per-file-ignores]
"tests/*.py" = ["E402"]  # Test files
"**/tests/*.py" = ["E402"]  # Test files in subdirectories
"apps/api/parliament/engine.py" = ["E402"]  # Conditional imports
"apps/api/routes/auth.py" = ["E402"]  # Conditional imports
"apps/api/ratelimit.py" = ["E402"]  # Late import
"apps/api/billing/service.py" = ["E402"]  # Late import
"apps/api/log_config.py" = ["E402", "B039"]  # Late import + ContextVar
"apps/api/main.py" = ["E402"]  # Late import
"apps/api/agents.py" = ["B904"]  # Custom exception wrapping
"apps/api/alembic/versions/*.py" = ["F841"]  # Migration files

[lint.isort]
known-first-party = ["apps"]
combine-as-imports = true

[format]
quote-style = "double"
indent-style = "space"

